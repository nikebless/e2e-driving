#!/bin/bash
#SBATCH --job-name="Extract driving data from thesis evaluation drives"
#SBATCH --time=23:59:00
#SBATCH --cpus-per-task=1
#SBATCH --partition=main
#SBATCH --mem=40G
#SBATCH --array=85-96

BAGS=(
    '2022-08-31-14-52-25_elva_classifier_512_forward.bag' \
    '2022-08-31-15-18-55_elva_classifier_512_forward_continued.bag' \
    '2022-08-31-15-26-05_elva_classifier_512_back.bag' \
    '2022-08-31-15-37-37_elva_ebm_512_front.bag' \
    '2022-08-31-15-48-15_elva_ebm_512_back.bag' \
    '2022-08-31-16-00-20_elva_classifier_256_front.bag' \
    '2022-08-31-16-11-28_elva_classifier_256_back.bag' \
    '2022-08-31-16-29-08_elva_ebm_256_front.bag' \
    '2022-08-31-16-42-01_elva_ebm_256_back.bag' \
    '2022-08-31-16-53-38_elva_classifier_128_front.bag' \
    '2022-08-31-17-04-28_elva_classifier_128_back.bag' \
    '2022-08-31-17-16-19_elva_ebm_128_front.bag' \
    '2022-08-31-17-26-53_elva_ebm_128_back.bag' \
    '2022-08-31-17-39-38_elva_classifier_512_front_rep2.bag' \
    '2022-08-31-17-50-13_elva_ebm_512_back_rep2.bag' \
    '2022-09-02-09-54-31_elva_mae_s1_rep1.bag' \
    '2022-09-02-10-20-29_elva_mae_s1_rep2.bag' \
    '2022-09-02-10-42-07_elva_mae_s1_rep3.bag' \
    '2022-09-02-11-04-39_elva_ebm_512_s1_rep1.bag' \
    '2022-09-02-11-27-02_elva_ebm_512_s1_rep2.bag' \
    '2022-09-02-11-48-55_elva_ebm_512_s1_rep3.bag' \
    '2022-09-08-10-13-30_ebm-512-s1.bag' \
    '2022-09-08-10-38-33_ebm_512_s2.bag' \
    '2022-09-08-11-01-21_ebm-512-s3.bag' \
    '2022-09-08-11-26-29_mae-s1.bag' \
    '2022-09-08-11-49-08_mae-s2.bag' \
    '2022-09-08-12-13-25_mae-s3.bag' \
    '2022-09-09-10-04-05-mdn-3-s2.bag' \
    '2022-09-09-10-27-50-mdn-5-s2.bag' \
    '2022-09-09-10-51-33-mdn-1-s1.bag' \
    '2022-09-09-11-00-03-mdn-5-s1.bag' \
    '2022-09-09-11-23-11-mdn-3-s3.bag' \
    '2022-09-09-11-47-04.bag' \
    'e2e-classifier-20percent-s2-backward_2022-09-13-12-44-44.bag' \
    'e2e-classifier-20percent-s2-forward_2022-09-13-12-33-22.bag' \
    'e2e-classifier-50percent-s1-backward_2022-09-13-11-53-59.bag' \
    'e2e-classifier-50percent-s1-forward_2022-09-13-11-42-53.bag' \
    'e2e-classifier-512-backward_2022-09-13-11-07-29.bag' \
    'e2e-classifier-512-forward_2022-09-13-10-56-50.bag' \
    'e2e-ebm-20percent-s2-backward_2022-09-13-12-21-25.bag' \
    'e2e-ebm-20percent-s2-forward_2022-09-13-12-10-23.bag' \
    'e2e-ebm-50percent-s2-backward_2022-09-13-11-30-33.bag' \
    'e2e-ebm-50percent-s2-forward_2022-09-13-11-19-28.bag' \
    'e2e-ebm-512-s1-backward_2022-09-13-10-44-25.bag' \
    'e2e-ebm-512-s1-forward_2022-09-13-10-33-34.bag' \
    '2021-10-26-10-49-06_e2e_rec_ss20_elva_eval_chunk.bag' \
    '2021-10-26-11-08-59_e2e_rec_ss20_elva_back_eval_chunk.bag' \
    'e2e-classifier-512-day1-backward_2022-09-20-12-31-35.bag' \
    'e2e-classifier-512-day1-forward_2022-09-20-12-20-47.bag' \
    'e2e-ebm-512-s1-day1-backward_2022-09-20-11-11-14.bag' \
    'e2e-ebm-512-s1-day1-forward_2022-09-20-11-00-41.bag' \
    'e2e-ebm-normal-1-s1-day1-backward_2022-09-20-13-48-42.bag' \
    'e2e-ebm-normal-1-s1-day1-forward_2022-09-20-13-37-56.bag' \
    'e2e-ebm-spatial-0-s2-day1-backward_2022-09-20-12-55-04.bag' \
    'e2e-ebm-spatial-0-s2-day1-forward_2022-09-20-12-44-32.bag' \
    'e2e-mae-s2-day1-backward_2022-09-20-11-35-49.bag' \
    'e2e-mae-s2-day1-forward_2022-09-20-11-25-14.bag' \
    'e2e-mdn-3-s2-day1-backward_2022-09-20-12-03-50.bag' \
    'e2e-mdn-3-s2-day1-forward_2022-09-20-11-52-56.bag' \
    'e2e-mdn-5-s1-day1-backward_2022-09-20-14-13-08.bag' \
    'e2e-mdn-5-s1-day1-forward_2022-09-20-14-00-44.bag' \
    'ebm-paper-classifier-512-backward_2022-09-21-11-47-38.bag' \
    'ebm-paper-classifier-512-forward_2022-09-21-11-36-50.bag' \
    'ebm-paper-ebm-512-s1-backward_2022-09-21-11-02-14.bag' \
    'ebm-paper-ebm-512-s1-forward_2022-09-21-10-51-39.bag' \
    'ebm-paper-ebm-normal-1-s1-backward_2022-09-21-12-10-33.bag' \
    'ebm-paper-ebm-normal-1-s1-forward_2022-09-21-11-59-17.bag' \
    'ebm-paper-ebm-spatial-0-s2-backward_2022-09-21-11-24-29.bag' \
    'ebm-paper-ebm-spatial-0-s2-forward_2022-09-21-11-13-54.bag' \
    'ebm-paper-mae-s2-backward_2022-09-21-12-34-47.bag' \
    'ebm-paper-mae-s2-forward_2022-09-21-12-22-57.bag' \
    'ebm-paper-mdn-5-s1-backward_2022-09-21-10-39-43.bag' \
    'ebm-paper-mdn-5-s1-forward_2022-09-21-10-29-09.bag' \
    'ebm-paper-classifier-512-backward_2022-09-22-11-58-03.bag' \
    'ebm-paper-classifier-512-forward_2022-09-22-11-47-18.bag' \
    'ebm-paper-ebm-512-s1-backward_2022-09-22-11-13-52.bag' \
    'ebm-paper-ebm-512-s1-forward_2022-09-22-11-02-58.bag' \
    'ebm-paper-ebm-normal-1-s1-backward_2022-09-22-12-25-57.bag' \
    'ebm-paper-ebm-normal-1-s1-forward_2022-09-22-12-15-22.bag' \
    'ebm-paper-ebm-spatial-0-s2-backward_2022-09-22-11-36-02.bag' \
    'ebm-paper-ebm-spatial-0-s2-forward_2022-09-22-11-25-33.bag' \
    'ebm-paper-mae-s2-backward_2022-09-22-10-26-02.bag' \
    'ebm-paper-mae-s2-forward_2022-09-22-10-02-03.bag' \
    'ebm-paper-mdn-5-s1-backward_2022-09-22-10-49-36.bag' \
    'ebm-paper-mdn-5-s1-forward_2022-09-22-10-38-10.bag' \
    'ebm-paper-classifier-512-backwards_2022-09-23-11-54-32.bag' \
    'ebm-paper-classifier-512-forward_2022-09-23-12-05-48.bag' \
    'ebm-paper-ebm-512-s1-backwards_2022-09-23-11-07-13.bag' \
    'ebm-paper-ebm-512-s1-forward_2022-09-23-11-18-29.bag' \
    'ebm-paper-ebm-normal-1-s1-backwards_2022-09-23-12-17-08.bag' \
    'ebm-paper-ebm-normal-1-s1-forward_2022-09-23-12-28-45.bag' \
    'ebm-paper-ebm-spatial-0-s2-backwards_2022-09-23-11-31-39.bag' \
    'ebm-paper-ebm-spatial-0-s2-forward_2022-09-23-11-43-09.bag' \
    'ebm-paper-mae-s2-backward_2022-09-23-10-19-55.bag' \
    'ebm-paper-mae-s2-forward_2022-09-23-10-31-24.bag' \
    'ebm-paper-mdn-5-s1-backwards_2022-09-23-10-43-34.bag' \
    'ebm-paper-mdn-5-s1-forward_2022-09-23-10-55-27.bag' \
)

srun python ./image_extractor.py --bag-file=/gpfs/space/projects/Bolt/bagfiles/${BAGS[$SLURM_ARRAY_TASK_ID]} --extract-dir=/gpfs/space/projects/Bolt/end-to-end/drives-ebm-paper
